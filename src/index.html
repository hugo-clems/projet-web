<!DOCTYPE html>
<html>
  <head>
	<!-- jquery -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="style.css">
  </head>
  <body>
    <div id="map"></div>
    <script type="text/javascript">
	
;

var map;
var albi = {lat: 43.919367, lng: 2.138310};
function initMap() {
	
  map = new google.maps.Map(document.getElementById('map'), {
    center: albi,
    zoom: 4,
	zoomControl: true,
	mapTypeControl: false,
	scaleControl: false,
	streetViewControl: false,
	rotateControl: false
  });
  
  google.maps.event.addListener(map, 'click', function(event) {
    placeMarker(event.latLng);
  });
  
  
} 


function placeMarker(location) {
  var marker = new google.maps.Marker({
      position: location,
      map: map
  });
  console.log(location.lat());
  console.log(location.lng());
  getCountry(location);
  
  <!-- TODO chercher sur le geocode pour avoir le nom du pays via une location -->
  
}

function getCountry (location) {
	var lat = location.lat();
	var lng = location.lng();
	console.log(lat);
	console.log(lng);
 	$.getJSON('http://maps.googleapis.com/maps/api/geocode/json?latlng='+lat+','+lng+'&sensor=false') 
			.done (function(location) 
			{ 
			var countryName;
			console.log(location);
			if(location.status == "OK"){
				country = (location.results[2]).address_components;
				console.log(country);
				for(i =0; i < country.length; i++){
					<!--console.log(country[i]); -->
					<!-- console.log(country[i].types[0]); -->
						if ((country[i]).types[0] == 'country') {
							countryName = (country[i]).long_name;
							<!-- TODO : Voir pour groenland et les autres --> 
						}
				}						
				console.log(countryName); 
			}
			
		}); 
	
}

	

  

	
	

    </script>
    <script async defer
      src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAt880iw5HS2GPerK_RZ1K-Qt5NneaP-_8&callback=initMap">
    </script>
  </body>
</html>
